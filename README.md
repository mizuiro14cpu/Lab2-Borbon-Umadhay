# Lab2-Borbon-Umadhay
A game library management system built with Express that performs CRUD operations and uses Supabase as its database

## Running
to test, paste and run in the terminal:
```bash
npm test
# or
npm run test:integration
```

## Installation and Setup
1. Clone the repo:
```bash
git clone https://github.com/mizuiro14cpu/Lab2-Borbon-Umadhay.git
cd Lab2-Borbon-Umadhay
```
2. Install dependencies:
```bash
npm install
```
3. Create a .env and .env.test file:
```bash
#.env
SUPABASE_URL=https://your-project-url.supabase.co
SUPABASE_KEY=your-publishable-key
PORT=3000

#.env.test
SUPABASE_URL=https://your-project-url.supabase.co
SUPABASE_KEY=your-secret-key
```

## API Endpoints

| Method | Endpoint | Description |
|--------|----------|-------------|
| POST | `/api/users` | Create a new user |
| GET | `/api/users` | Get all users |
| POST | `/api/games` | Create a new game entry |
| GET | `/api/games` | Get all registered games |
***COMPLETE LATER***


## Supabase Setup
Add these tables to Supabase:

**users**
```bash
create table public.users (
  id bigint generated by default as identity not null,
  created_at timestamp with time zone not null default now(),
  username text not null default ''::text,
  email text not null,
  constraint users_pkey primary key (id),
  constraint users_email_key unique (email),
  constraint users_username_key unique (username)
) TABLESPACE pg_default;
```
**games**
```bash
create table public.games (
  id bigint generated by default as identity not null,
  created_at timestamp with time zone not null default now(),
  title text not null,
  release_year integer null,
  developer_id bigint null,
  constraint games_pkey primary key (id),
  constraint games_developer_id_fkey foreign KEY (developer_id) references developers (id) on delete set null
) TABLESPACE pg_default;
```
**developers**
```bash
create table public.developers (
  id bigint generated by default as identity not null,
  created_at timestamp with time zone not null default now(),
  name text not null,
  constraint developer_pkey primary key (id),
  constraint developer_name_key unique (name)
) TABLESPACE pg_default;
```
**genres**
```bash
create table public.genres (
  id bigint generated by default as identity not null,
  created_at timestamp with time zone not null default now(),
  name text not null,
  constraint genres_pkey primary key (id),
  constraint genres_name_key unique (name)
) TABLESPACE pg_default;
```
**game_genres**
```bash
create table public.game_genres (
  game_id bigint not null,
  genre_id bigint not null,
  constraint game_genres_pkey primary key (game_id, genre_id),
  constraint game_genres_game_id_fkey foreign KEY (game_id) references games (id) on delete CASCADE,
  constraint game_genres_genre_id_fkey foreign KEY (genre_id) references genres (id) on delete CASCADE
) TABLESPACE pg_default;
```
**user_games**
```bash
create table public.user_games (
  game_id bigint not null,
  user_id bigint not null,
  constraint user_games_pkey primary key (game_id, user_id),
  constraint user_games_game_id_fkey foreign KEY (game_id) references games (id) on delete CASCADE,
  constraint user_games_user_id_fkey foreign KEY (user_id) references users (id) on delete CASCADE
) TABLESPACE pg_default;
```
